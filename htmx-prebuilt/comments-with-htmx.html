
<!--
	// v0 by Vercel.
	// https://v0.dev/t/YQHMiDbZrWP
	
	// v0 is a really nice experience tbh
-->

<!--
	Note that the only 'HTMX' specific thing here is the hx-* attributes.
	They only exist on the comment-list div, and the comment-form form.
-->	

{{ $slug := split .RelPermalink "/" }}
{{ $slug = collections.Reverse $slug }}
{{ $slug = index $slug 1 }}
<div id="comment-list" hx-get="http://localhost:3000/comments/{{ $slug }}" hx-trigger="load" class="flex flex-col gap-4 border border-gray-300 rounded-md p-4">
	<p class="text-stone-500">Comments will be shown here, this is a placeholder. The classes used here are to trick tailwind into including them in the CSS file, so we can use them in the server response.</p>
</div>

<div id="comment-form">
	<!-- That tiny bit of JS is just to reset the form after submission - this is how JS was intended to be used, not these gargantuan frameworks. -->
	<form hx-post="http://localhost:3000/comments/{{ $slug }}" hx-target="#comment-list" hx-swap="beforeend" onsubmit="setTimeout(() => { this.reset() }, 50)">

		<div
			class="flex flex-col gap-4 border border-gray-300 rounded-md p-4 text-stone-800"
		>
			<div class="flex items-center gap-2">
				<input
					name="author"
					class="flex h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 w-1/2 md:w-1/4"
					placeholder="Enter your name..."
					type="text"
					value="Ben Allen"
				/>
				<input
					name="email"
					class="flex h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 w-1/2 md:w-1/4"
					placeholder="Enter your email..."
					type="email"
					value="ballen@anwb.nl"
				/>
			</div>
			<div class="flex items-center gap-2">
				<input
					name="text"
					class="flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 flex-1 h-12"
					placeholder="Type your comment here..."
					type="text"
				/>
				<input
					class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-primary/90 h-10 px-4 py-2 bg-stone-900 text-white"
					type="submit"
				>
					Submit
				</button>
			</div>
		</div>
	</form>
</div>
